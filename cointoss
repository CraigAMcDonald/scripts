#!/usr/bin/env ruby

# Heads or Tails
class Coin
  # setters for certain fields
  attr_reader :heads_name, :tails_name, :limit, :runs

  def initialize
    @heads_name = 'Heads'
    @tails_name = 'Tails'
    @heads_count = 0
    @tails_count = 0
    @limit = 5
    @runs = 1
    @data = []
  end

  def to_s
    @data.join("\n")
  end

  # Flip the coin x times for y runs
  def flip
    (1..@runs).each do
      (1..@limit).each do
        if rand(0..1) == 1
          @heads_count += 1
        else
          @tails_count += 1
        end
      end

      update
    end
  end

  def heads_name=(name)
    @heads_name =
      if name.nil? || name.strip.empty?
        'Heads'
      else
        name
      end
  end

  def tails_name=(name)
    @tails_name =
      if name.nil? || name.strip.empty?
        'Heads'
      else
        name
      end
  end

  def limit=(value)
    @limit =
      if value < 1
        1
      else
        value
      end
  end

  def runs=(value)
    @runs =
      if value < 1
        1
      else
        value
      end
  end

  private

  def update
    @data.append("#{@heads_name}: #{@heads_count}, #{@tails_name}: #{@tails_count}")
    @heads_count = 0
    @tails_count = 0
  end
end

coin = Coin.new

# can supply coin names
if ARGV.size >= 2
  coin.heads_name = ARGV[0]
  coin.tails_name = ARGV[1]
end

# can supply number of flips
coin.limit = ARGV[2].to_i if ARGV.size >= 3

# can supply number of runs of flips
coin.runs = ARGV[3].to_i if ARGV.size >= 4

coin.flip
puts coin
